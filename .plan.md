# Swift Dialog Refactoring Plan

## Goal
Make all Swift dialogs composable so changes propagate consistently across all dialog types.

## Current State
6 dialog types with duplicated patterns:
- `SwiftUIConfirmDialog` - icon, title, message, 2 buttons
- `SwiftUIChooseDialog` - prompt, choice cards, 2 buttons
- `SwiftUIWizardDialog` - progress bar, step navigation
- `SwiftUIAccordionDialog` - collapsible sections
- `SwiftUIQuestionnaireDialog` - all questions visible
- Text input dialog (AppKit-based)

**Duplicated across all:**
- `.onAppear { setupKeyboardNavigation() }` / `.onDisappear`
- Header layout (icon circle + title)
- Footer layout (keyboard hints + buttons)
- Background handling
- Window setup in DialogManager

## Composable Components (Added)
Already created:
- `DialogHeader` - icon + title + optional subtitle
- `DialogFooter` - keyboard hints + action buttons
- `DialogContainer` - wraps content, handles keyboard lifecycle

## Refactoring Steps

### Step 1: Refactor SwiftUIConfirmDialog
Replace manual header/footer with components:
- Use `DialogContainer` as outer wrapper
- Use `DialogHeader(icon:title:subtitle:)`
- Use `DialogFooter(hints:buttons:)`
- Remove duplicate keyboard setup code

### Step 2: Refactor SwiftUIChooseDialog
- Wrap in `DialogContainer`
- Use `DialogHeader` for prompt icon + title
- Use `DialogFooter` for buttons
- Keep choice cards section unchanged

### Step 3: Refactor SwiftUIWizardDialog
- Wrap in `DialogContainer`
- Use `DialogHeader` for step icon + title
- Use `DialogFooter` with step navigation buttons
- Keep `ProgressBar` and `QuestionSection` as-is

### Step 4: Refactor SwiftUIAccordionDialog
- Wrap in `DialogContainer`
- Keep `AccordionSection` for collapsible content
- Use `DialogFooter` for submit button

### Step 5: Refactor SwiftUIQuestionnaireDialog
- Wrap in `DialogContainer`
- Use `DialogHeader` for title
- Use `DialogFooter` for submit button

### Step 6: Test all dialogs
Run each dialog type to verify no regressions.

## Benefits After Refactoring
- Add "message after answer" → modify `DialogFooter`
- Add countdown timer → add to `DialogContainer`
- Change header style → modify `DialogHeader` once
- Change keyboard hints → modify `DialogFooter` once
